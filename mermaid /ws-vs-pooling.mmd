%%{init: {'theme': 'default', 'themeVariables': {'primaryColor': '#4285f4', 'primaryTextColor': '#ffffff', 'primaryBorderColor': '#1a73e8', 'lineColor': '#34a853', 'sectionBkgColor': '#f8f9fa', 'altSectionBkgColor': '#e8f0fe', 'gridColor': '#dadce0', 'tertiaryColor': '#fbbc04', 'background': '#ffffff', 'secondaryColor': '#ea4335', 'fontFamily': 'Arial, sans-serif', 'activationBorderColor': '#ff6b6b', 'activationBkgColor': '#ffe6e6'}}}%%

sequenceDiagram
    autonumber
    participant C as ğŸ“± Client
    participant WS as ğŸš€ WebServer
    participant R as ğŸ”„ Redis
    participant W as ğŸ”¨ Worker

    Note over C,W: ğŸ”„ **HTTP Polling Approach** ğŸ”„
    
    rect rgb(255, 245, 245)
        C->>+WS: ğŸ“¤ POST /tasks
        WS->>+R: ğŸ“‹ Publish Task â¡ï¸
        R->>+W: âš¡ Assign Task
        W-->>-R: ğŸ“Š Progress Update â†—ï¸
        R-->>-WS: âœ… Task Created
        WS-->>-C: ğŸ†” Task ID Response
        
        loop ğŸ”„ Continuous Polling (Every 2-5s)
            C->>+WS: ğŸ” GET /tasks/{task_id}
            WS->>+R: ğŸ“Š Get Progress
            R-->>-WS: ğŸ“ˆ Progress Data
            WS-->>-C: ğŸ“‹ Response with Progress
            Note right of C: â±ï¸ Wait 2-5 seconds
        end
    end

    Note over C,W: âš¡ **WebSocket Real-time Approach** âš¡
    
    rect rgb(240, 255, 245)
        C->>+WS: ğŸ”Œ WebSocket Connection
        WS-->>-C: âœ… Connection Established
        
        C->>+WS: ğŸ“¤ POST /tasks
        WS->>+R: ğŸ“‹ Publish Task â¡ï¸
        R->>+W: âš¡ Assign Task
        WS-->>C: ğŸ†” Task ID Response
        
        loop ğŸš€ Real-time Updates (Instant)
            W-->>R: ğŸ“Š Progress Update â†—ï¸
            R-->>WS: ğŸ“¢ Publish Progress Event ğŸš€
            WS-->>C: ğŸ“¡ WebSocket Message (Instant)
        end
        
        W-->>R: âœ… Task Completed
        R-->>WS: ğŸ‰ Completion Event
        WS-->>C: âœ… Task Complete Notification
    end

    Note over C,W: ğŸ“Š **Comparison Summary** ğŸ“Š
    Note over C,WS: ğŸ”„ Polling: Multiple requests, delay<br/>âš¡ WebSocket: Single connection, instant